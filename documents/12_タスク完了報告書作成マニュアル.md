# タスク完了報告書作成マニュアル

このマニュアルは、タスク完了時に詳細な報告書を作成するためのガイドラインを提供します。タスク完了報告書は、作業内容の記録、知識の共有、および将来の参照のために重要です。

## 報告書の構成

タスク完了報告書は以下の構成に従って作成してください：

### 1. タスクの詳細

このセクションでは、実施したタスクの概要と背景を説明します。

- タスクの名前と識別子（例：「TASK-123: リンターとフォーマッターの導入」）
- タスクの目的と背景
- 関連する要件やチケット番号
- タスクの優先度や重要性

例：
```
## 1. タスクの詳細

### タスク名
リンターとフォーマッターの導入

### 目的
コードの品質と一貫性を向上させるため、プロジェクトにリンターとフォーマッターを導入する。

### 関連チケット
JIRA: DEV-456

### 優先度
中
```

### 2. 対応内容

このセクションでは、タスクを完了するために行った具体的な作業内容を詳細に記述します。

- 実施した変更の詳細
- 追加・変更・削除したファイル
- 使用した技術やツール
- 実装の詳細や選択した理由
- 設定内容や環境変更

例：
```
## 2. 対応内容

以下の作業を実施しました：

1. **ツールの追加**
   - requirements.txtにflake8、isort、blackを追加
   - Dockerイメージを再ビルドしてツールをインストール

2. **設定ファイルの作成**
   - `.flake8`: flake8の設定（行の長さ制限、除外ファイルなど）
   - `.isort.cfg`: isortの設定（Blackと互換性のある設定）
   - `pyproject.toml`: Blackの設定（行の長さ、対象Pythonバージョンなど）

3. **docker-compose.ymlの更新**
   - 設定ファイルをコンテナにマウントするように設定

4. **便利なスクリプトの作成**
   - `scripts/lint.sh`: リンターとフォーマッターを一括で実行するスクリプト
   - 特定のディレクトリやファイルに対して実行可能
   - チェックのみモードと自動修正モードをサポート

5. **READMEの更新**
   - 各ツールの使用方法を詳細に説明
   - 一括実行スクリプトの使用方法を追加
```

### 3. 残課題

このセクションでは、タスク完了後に残っている課題や今後の改善点を記述します。

- 未解決の問題
- 将来的に対応すべき改善点
- 既知の制限事項や注意点
- フォローアップタスクの提案

例：
```
## 3. 残課題

以下の課題が残っています：

1. **コードの自動修正**
   - 一部のファイルでは行の長さ制限（88文字）を超えるコードがあり、手動での修正が必要

2. **CI/CDパイプラインへの統合**
   - リンターとフォーマッターをCI/CDパイプラインに統合して、プルリクエスト時に自動チェックを行うようにする

3. **開発チームへのトレーニング**
   - 新しいリンターとフォーマッターの使用方法について開発チームにトレーニングを実施する

4. **pre-commitフックの導入**
   - コミット前に自動的にリンターとフォーマッターを実行するpre-commitフックの導入を検討する
```

### 4. リンターを実行する方法

このセクションでは、導入したツールやシステムの使用方法を説明します。

- 実行コマンドや操作手順
- 設定オプションや引数の説明
- 一般的なエラーとその解決方法
- ベストプラクティスや推奨事項

例：
```
## 4. リンターを実行する方法

### 一括実行（推奨）

すべてのリンターとフォーマッターを一括で実行するには：

```bash
./scripts/lint.sh
```

### オプション

- 特定のディレクトリのみを対象にする：
  ```bash
  ./scripts/lint.sh app/api
  ```

- チェックのみ実行（コードは変更しない）：
  ```bash
  ./scripts/lint.sh --check
  ```

- ヘルプを表示：
  ```bash
  ./scripts/lint.sh --help
  ```

### 個別実行

各ツールを個別に実行することも可能です：

- flake8（リンター）：
  ```bash
  docker exec political-feed-api flake8 app tests
  ```

- isort（インポート整理）：
  ```bash
  docker exec political-feed-api isort app tests
  ```

- black（コードフォーマッター）：
  ```bash
  docker exec political-feed-api black app tests
  ```

### エラー対応

- 行の長さエラー（E501）：
  長い行は複数行に分割するか、変数名を短くするなどして対応してください。

- インポート順序エラー：
  isortを実行して自動的に修正できます。

- フォーマットエラー：
  blackを実行して自動的に修正できます。
```

## 報告書の提出

タスク完了報告書は以下の手順で提出してください：

1. Markdownファイルとして作成し、`documents/tasks/`ディレクトリに保存する
2. ファイル名は「YYYYMMDD_タスク名.md」の形式にする（例：「20250321_リンター導入.md」）
3. リポジトリにコミットし、プルリクエストを作成する
4. レビュー担当者にレビューを依頼する

## テンプレート

新しいタスク完了報告書を作成する際は、以下のテンプレートを使用してください：

```markdown
# [タスク名]

## 1. タスクの詳細

### タスク名
[タスク名を記入]

### 目的
[タスクの目的を記入]

### 関連チケット
[関連するチケット番号を記入]

### 優先度
[優先度を記入]

## 2. 対応内容

[対応内容の詳細を記入]

## 3. 残課題

[残課題の詳細を記入]

## 4. 使用方法

[導入したツールやシステムの使用方法を記入]